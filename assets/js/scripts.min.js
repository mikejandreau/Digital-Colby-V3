"use strict";

// CLASS HELPERS
// Vanilla JS class toggling scripts for use without jQuery
// hasClass
function hasClass(elem, className) {
  return new RegExp(' ' + className + ' ').test(' ' + elem.className + ' ');
} // addClass


function addClass(elem, className) {
  if (!hasClass(elem, className)) {
    elem.className += ' ' + className;
  }
} // removeClass


function removeClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, ' ') + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(' ' + className + ' ') >= 0) {
      newClass = newClass.replace(' ' + className + ' ', ' ');
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  }
} // toggleClass


function toggleClass(elem, className) {
  var newClass = ' ' + elem.className.replace(/[\t\r\n]/g, " ") + ' ';

  if (hasClass(elem, className)) {
    while (newClass.indexOf(" " + className + " ") >= 0) {
      newClass = newClass.replace(" " + className + " ", " ");
    }

    elem.className = newClass.replace(/^\s+|\s+$/g, '');
  } else {
    elem.className += ' ' + className;
  }
}
"use strict";

/**
* ISOTOPE MASONRY & FILTERING
* Trigger Isotope layouts with isotope-pkgd.js
*/
// Find .grid in DOM
var isotopeGridBlock = document.getElementsByClassName('grid'); // Run Isotope if .grid is present 

if (isotopeGridBlock.length > 0) {
  var iso = new Isotope('.grid', {
    itemSelector: '.grid-item',
    // layoutMode: 'fitRows'
    layoutMode: 'masonry' // masonry: {
    //   columnWidth: 50
    // }

  });
} // bind filter button click


var filtersElem = document.querySelector('.filter-buttons');

if (filtersElem) {
  // check to see if filtersElem is not null, then add event listenter
  filtersElem.addEventListener('click', function (event) {
    "use strict"; // only work with buttons

    if (!matchesSelector(event.target, 'button')) {
      return;
    }

    var filterValue = event.target.getAttribute('data-filter'); // use matching filter function
    // filterValue = filterFns[ filterValue ] || filterValue;

    iso.arrange({
      filter: filterValue
    });
  });
} // change is-checked class on buttons


var buttonGroups = document.querySelectorAll('.button-group');

for (var i = 0, len = buttonGroups.length; i < len; i++) {
  var buttonGroup = buttonGroups[i];
  radioButtonGroup(buttonGroup);
}

function radioButtonGroup(buttonGroup) {
  "use strict";

  buttonGroup.addEventListener('click', function (event) {
    // only work with buttons
    if (!matchesSelector(event.target, 'button')) {
      return;
    }

    buttonGroup.querySelector('.is-checked').classList.remove('is-checked');
    event.target.classList.add('is-checked');
  });
}
/**
 * File navigation.js.
 *
 * Handles toggling the navigation menu for small screens and enables TAB key
 * navigation support for dropdown menus.
 */
// 
// toggle between open states for search and main menu navbar
//  $('.navbar').on('show', function () {
//     var actives = $(this).find('.collapse.in'),
//         hasData;
//     if (actives && actives.length) {
//         hasData = actives.data('collapse')
//         if (hasData && hasData.transitioning) return
//         actives.collapse('hide')
//         hasData || actives.data('collapse', null)
//     }
// });
// ( function() {
// 	const siteNavigation = document.getElementById( 'site-navigation' );
// 	// Return early if the navigation don't exist.
// 	if ( ! siteNavigation ) {
// 		return;
// 	}
// 	const button = siteNavigation.getElementsByTagName( 'button' )[ 0 ];
// 	// Return early if the button don't exist.
// 	if ( 'undefined' === typeof button ) {
// 		return;
// 	}
// 	const menu = siteNavigation.getElementsByTagName( 'ul' )[ 0 ];
// 	// Hide menu toggle button if menu is empty and return early.
// 	if ( 'undefined' === typeof menu ) {
// 		button.style.display = 'none';
// 		return;
// 	}
// 	if ( ! menu.classList.contains( 'nav-menu' ) ) {
// 		menu.classList.add( 'nav-menu' );
// 	}
// 	// Toggle the .toggled class and the aria-expanded value each time the button is clicked.
// 	button.addEventListener( 'click', function() {
// 		siteNavigation.classList.toggle( 'toggled' );
// 		if ( button.getAttribute( 'aria-expanded' ) === 'true' ) {
// 			button.setAttribute( 'aria-expanded', 'false' );
// 		} else {
// 			button.setAttribute( 'aria-expanded', 'true' );
// 		}
// 	} );
// 	// Remove the .toggled class and set aria-expanded to false when the user clicks outside the navigation.
// 	document.addEventListener( 'click', function( event ) {
// 		const isClickInside = siteNavigation.contains( event.target );
// 		if ( ! isClickInside ) {
// 			siteNavigation.classList.remove( 'toggled' );
// 			button.setAttribute( 'aria-expanded', 'false' );
// 		}
// 	} );
// 	// Get all the link elements within the menu.
// 	const links = menu.getElementsByTagName( 'a' );
// 	// Get all the link elements with children within the menu.
// 	const linksWithChildren = menu.querySelectorAll( '.menu-item-has-children > a, .page_item_has_children > a' );
// 	// Toggle focus each time a menu link is focused or blurred.
// 	for ( const link of links ) {
// 		link.addEventListener( 'focus', toggleFocus, true );
// 		link.addEventListener( 'blur', toggleFocus, true );
// 	}
// 	// Toggle focus each time a menu link with children receive a touch event.
// 	for ( const link of linksWithChildren ) {
// 		link.addEventListener( 'touchstart', toggleFocus, false );
// 	}
// 	/**
// 	 * Sets or removes .focus class on an element.
// 	 */
// 	function toggleFocus() {
// 		if ( event.type === 'focus' || event.type === 'blur' ) {
// 			let self = this;
// 			// Move up through the ancestors of the current link until we hit .nav-menu.
// 			while ( ! self.classList.contains( 'nav-menu' ) ) {
// 				// On li elements toggle the class .focus.
// 				if ( 'li' === self.tagName.toLowerCase() ) {
// 					self.classList.toggle( 'focus' );
// 				}
// 				self = self.parentNode;
// 			}
// 		}
// 		if ( event.type === 'touchstart' ) {
// 			const menuItem = this.parentNode;
// 			event.preventDefault();
// 			for ( const link of menuItem.parentNode.children ) {
// 				if ( menuItem !== link ) {
// 					link.classList.remove( 'focus' );
// 				}
// 			}
// 			menuItem.classList.toggle( 'focus' );
// 		}
// 	}
// }() );
"use strict";
"use strict";

// main.js
// JQUERY USE STRICT SCRIPT WRAPPER
// scroll easing, scrollspy, fancybox, and isotope - comment what isn't needed, or add more
(function ($) {
  "use strict"; // Start of use strict
  // MOBILE MENU TOGGLE
  // toggle the mobile menu button open and closed states

  var removeClass = true;
  $(".navbar-toggler").click(function () {
    $(".navbar-toggler").toggleClass('is-active');
    $("#navbarSearch").removeClass('is-active');
    removeClass = false;
  }); // ignore clicking the navbar search

  $(".nav-search").click(function () {
    removeClass = false;
  }); // close nav if page is clicked

  $("html").click(function () {
    if (removeClass) {
      $(".navbar-toggler").removeClass('is-active');
      $('.navbar-collapse').collapse('hide');
    }

    removeClass = true;
  }); // closes responsive menu when a scroll trigger link is clicked

  $('.js-scroll-trigger').click(function () {
    $(".navbar-toggler").removeClass('is-active');
    $('.navbar-collapse').collapse('hide');
  }); // // closes responsive menu when a navbar link is clicked
  // $('.js-scroll-trigger > a').click(function() {
  //   $(".navbar-toggler").removeClass('is-active');
  //   $('.navbar-collapse').collapse('hide');
  // });
  // disable mobile nav for laptop and desktop

  $(window).resize(function () {
    if ($(this).width() > 991) {
      $(".navbar-toggler").removeClass('is-active');
      $('.navbar-collapse').collapse('hide');
    }
  }); // Search menu toggles

  $('#navbarSearchToggler').click(function () {
    $("#navbarSearch").toggleClass('is-active');
    $(".navbar-toggler").removeClass('is-active');
    $('.navbar-collapse').collapse('hide');
  });
  $('#navbarSearchClose').click(function () {
    $("#navbarSearch").removeClass('is-active');
  }); // // SCROLLUP BUTTON
  // // show scrollup button after scrolling 300px
  // scrollToTopButton = document.getElementById("scrollUpButton");
  // var showScrollToTop = function () {
  //   var y = window.scrollY;
  //   if (y >= 300) {
  //     scrollToTopButton.className = "scrollup show"
  //   } else {
  //     scrollToTopButton.className = "scrollup"
  //   }
  // };
  // window.addEventListener("scroll", showScrollToTop);

  $(window).scroll(function () {
    var scroll = $(window).scrollTop();

    if (scroll >= 300) {
      $("#scrollUpButton").addClass("show");
    } else {
      $("#scrollUpButton").removeClass("show");
    }
  }); // Smooth scrolling using jQuery easing

  $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function () {
    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');

      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top - 56 // match px to padding-top of body tag

        }, 1000, "easeInOutExpo");
        return false;
      }
    }
  }); // Smooth scrolling using jQuery easing

  $('.js-scroll-trigger>a[href*="#"]:not([href="#"])').click(function () {
    if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
      var target = $(this.hash);
      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');

      if (target.length) {
        $('html, body').animate({
          scrollTop: target.offset().top - 56 // match px to padding-top of body tag

        }, 1000, "easeInOutExpo");
        return false;
      }
    }
  }); // Make sure scripts rendered

  $(document).ready(function () {
    console.log('document is ready, aww yeah');
  });
})(jQuery); // End of use strict
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsYXNzLWhlbHBlcnMuanMiLCJpc290b3BlLWluaXQuanMiLCJuYXZpZ2F0aW9uLmpzIiwic2Nyb2xsdXAuanMiXSwibmFtZXMiOlsiaGFzQ2xhc3MiLCJlbGVtIiwiY2xhc3NOYW1lIiwiUmVnRXhwIiwidGVzdCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJuZXdDbGFzcyIsInJlcGxhY2UiLCJpbmRleE9mIiwidG9nZ2xlQ2xhc3MiLCJpc290b3BlR3JpZEJsb2NrIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwibGVuZ3RoIiwiaXNvIiwiSXNvdG9wZSIsIml0ZW1TZWxlY3RvciIsImxheW91dE1vZGUiLCJmaWx0ZXJzRWxlbSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJtYXRjaGVzU2VsZWN0b3IiLCJ0YXJnZXQiLCJmaWx0ZXJWYWx1ZSIsImdldEF0dHJpYnV0ZSIsImFycmFuZ2UiLCJmaWx0ZXIiLCJidXR0b25Hcm91cHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiaSIsImxlbiIsImJ1dHRvbkdyb3VwIiwicmFkaW9CdXR0b25Hcm91cCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsIiQiLCJjbGljayIsImNvbGxhcHNlIiwid2luZG93IiwicmVzaXplIiwid2lkdGgiLCJzY3JvbGwiLCJzY3JvbGxUb3AiLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiaG9zdG5hbWUiLCJoYXNoIiwic2xpY2UiLCJhbmltYXRlIiwib2Zmc2V0IiwidG9wIiwicmVhZHkiLCJjb25zb2xlIiwibG9nIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFFQTtBQUNBLFNBQVNBLFFBQVQsQ0FBa0JDLElBQWxCLEVBQXdCQyxTQUF4QixFQUFtQztBQUMvQixTQUFPLElBQUlDLE1BQUosQ0FBVyxNQUFNRCxTQUFOLEdBQWtCLEdBQTdCLEVBQWtDRSxJQUFsQyxDQUF1QyxNQUFNSCxJQUFJLENBQUND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O0FBTUMsQ0E1SEQsRUE0SEdDLE1BNUhILEUsQ0E0SFkiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDTEFTUyBIRUxQRVJTXG4vLyBWYW5pbGxhIEpTIGNsYXNzIHRvZ2dsaW5nIHNjcmlwdHMgZm9yIHVzZSB3aXRob3V0IGpRdWVyeVxuXG4vLyBoYXNDbGFzc1xuZnVuY3Rpb24gaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJyAnICsgY2xhc3NOYW1lICsgJyAnKS50ZXN0KCcgJyArIGVsZW0uY2xhc3NOYW1lICsgJyAnKTtcbn1cblxuLy8gYWRkQ2xhc3NcbmZ1bmN0aW9uIGFkZENsYXNzKGVsZW0sIGNsYXNzTmFtZSkge1xuICAgIGlmICghaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSkge1xuICAgICAgICBlbGVtLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgfVxufVxuXG4vLyByZW1vdmVDbGFzc1xuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XG4gICAgdmFyIG5ld0NsYXNzID0gJyAnICsgZWxlbS5jbGFzc05hbWUucmVwbGFjZSgvW1xcdFxcclxcbl0vZywgJyAnKSArICcgJztcbiAgICBpZiAoaGFzQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSkge1xuICAgICAgICB3aGlsZSAobmV3Q2xhc3MuaW5kZXhPZignICcgKyBjbGFzc05hbWUgKyAnICcpID49IDApIHtcbiAgICAgICAgICAgIG5ld0NsYXNzID0gbmV3Q2xhc3MucmVwbGFjZSgnICcgKyBjbGFzc05hbWUgKyAnICcsICcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBuZXdDbGFzcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgfVxufVxuXG4vLyB0b2dnbGVDbGFzc1xuZnVuY3Rpb24gdG9nZ2xlQ2xhc3MoZWxlbSwgY2xhc3NOYW1lKSB7XG4gICAgdmFyIG5ld0NsYXNzID0gJyAnICsgZWxlbS5jbGFzc05hbWUucmVwbGFjZSgvW1xcdFxcclxcbl0vZywgXCIgXCIpICsgJyAnO1xuICAgIGlmIChoYXNDbGFzcyhlbGVtLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIHdoaWxlIChuZXdDbGFzcy5pbmRleE9mKFwiIFwiICsgY2xhc3NOYW1lICsgXCIgXCIpID49IDApIHtcbiAgICAgICAgICAgIG5ld0NsYXNzID0gbmV3Q2xhc3MucmVwbGFjZShcIiBcIiArIGNsYXNzTmFtZSArIFwiIFwiLCBcIiBcIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxlbS5jbGFzc05hbWUgPSBuZXdDbGFzcy5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbS5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICAgIH1cbn1cbiIsIi8qKlxuKiBJU09UT1BFIE1BU09OUlkgJiBGSUxURVJJTkdcbiogVHJpZ2dlciBJc290b3BlIGxheW91dHMgd2l0aCBpc290b3BlLXBrZ2QuanNcbiovXG5cbi8vIEZpbmQgLmdyaWQgaW4gRE9NXG52YXIgaXNvdG9wZUdyaWRCbG9jayA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2dyaWQnKTtcblxuLy8gUnVuIElzb3RvcGUgaWYgLmdyaWQgaXMgcHJlc2VudCBcbmlmIChpc290b3BlR3JpZEJsb2NrLmxlbmd0aCA+IDApIHtcbiAgdmFyIGlzbyA9IG5ldyBJc290b3BlKCAnLmdyaWQnLCB7XG4gICAgaXRlbVNlbGVjdG9yOiAnLmdyaWQtaXRlbScsXG4gICAgLy8gbGF5b3V0TW9kZTogJ2ZpdFJvd3MnXG4gICAgbGF5b3V0TW9kZTogJ21hc29ucnknXG4gICAgLy8gbWFzb25yeToge1xuICAgIC8vICAgY29sdW1uV2lkdGg6IDUwXG4gICAgLy8gfVxuICB9KTtcbn1cblxuLy8gYmluZCBmaWx0ZXIgYnV0dG9uIGNsaWNrXG52YXIgZmlsdGVyc0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmlsdGVyLWJ1dHRvbnMnKTtcbmlmKGZpbHRlcnNFbGVtKXsgLy8gY2hlY2sgdG8gc2VlIGlmIGZpbHRlcnNFbGVtIGlzIG5vdCBudWxsLCB0aGVuIGFkZCBldmVudCBsaXN0ZW50ZXJcbiAgZmlsdGVyc0VsZW0uYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIC8vIG9ubHkgd29yayB3aXRoIGJ1dHRvbnNcbiAgICBpZiAoICFtYXRjaGVzU2VsZWN0b3IoIGV2ZW50LnRhcmdldCwgJ2J1dHRvbicgKSApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGZpbHRlclZhbHVlID0gZXZlbnQudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1maWx0ZXInKTtcbiAgICAvLyB1c2UgbWF0Y2hpbmcgZmlsdGVyIGZ1bmN0aW9uXG4gICAgLy8gZmlsdGVyVmFsdWUgPSBmaWx0ZXJGbnNbIGZpbHRlclZhbHVlIF0gfHwgZmlsdGVyVmFsdWU7XG4gICAgaXNvLmFycmFuZ2UoeyBmaWx0ZXI6IGZpbHRlclZhbHVlIH0pO1xuICB9KTtcbn1cblxuLy8gY2hhbmdlIGlzLWNoZWNrZWQgY2xhc3Mgb24gYnV0dG9uc1xudmFyIGJ1dHRvbkdyb3VwcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idXR0b24tZ3JvdXAnKTtcbmZvciAoIHZhciBpPTAsIGxlbiA9IGJ1dHRvbkdyb3Vwcy5sZW5ndGg7IGkgPCBsZW47IGkrKyApIHtcbiAgdmFyIGJ1dHRvbkdyb3VwID0gYnV0dG9uR3JvdXBzW2ldO1xuICByYWRpb0J1dHRvbkdyb3VwKCBidXR0b25Hcm91cCApO1xufVxuXG5mdW5jdGlvbiByYWRpb0J1dHRvbkdyb3VwKCBidXR0b25Hcm91cCApIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG4gIGJ1dHRvbkdyb3VwLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgICAvLyBvbmx5IHdvcmsgd2l0aCBidXR0b25zXG4gICAgaWYgKCAhbWF0Y2hlc1NlbGVjdG9yKCBldmVudC50YXJnZXQsICdidXR0b24nICkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGJ1dHRvbkdyb3VwLnF1ZXJ5U2VsZWN0b3IoJy5pcy1jaGVja2VkJykuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY2hlY2tlZCcpO1xuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuYWRkKCdpcy1jaGVja2VkJyk7XG4gIH0pO1xufVxuXG5cblxuIiwiLyoqXG4gKiBGaWxlIG5hdmlnYXRpb24uanMuXG4gKlxuICogSGFuZGxlcyB0b2dnbGluZyB0aGUgbmF2aWdhdGlvbiBtZW51IGZvciBzbWFsbCBzY3JlZW5zIGFuZCBlbmFibGVzIFRBQiBrZXlcbiAqIG5hdmlnYXRpb24gc3VwcG9ydCBmb3IgZHJvcGRvd24gbWVudXMuXG4gKi9cblxuLy8gXG4vLyB0b2dnbGUgYmV0d2VlbiBvcGVuIHN0YXRlcyBmb3Igc2VhcmNoIGFuZCBtYWluIG1lbnUgbmF2YmFyXG4vLyAgJCgnLm5hdmJhcicpLm9uKCdzaG93JywgZnVuY3Rpb24gKCkge1xuLy8gICAgIHZhciBhY3RpdmVzID0gJCh0aGlzKS5maW5kKCcuY29sbGFwc2UuaW4nKSxcbi8vICAgICAgICAgaGFzRGF0YTtcbiAgICBcbi8vICAgICBpZiAoYWN0aXZlcyAmJiBhY3RpdmVzLmxlbmd0aCkge1xuLy8gICAgICAgICBoYXNEYXRhID0gYWN0aXZlcy5kYXRhKCdjb2xsYXBzZScpXG4vLyAgICAgICAgIGlmIChoYXNEYXRhICYmIGhhc0RhdGEudHJhbnNpdGlvbmluZykgcmV0dXJuXG4vLyAgICAgICAgIGFjdGl2ZXMuY29sbGFwc2UoJ2hpZGUnKVxuLy8gICAgICAgICBoYXNEYXRhIHx8IGFjdGl2ZXMuZGF0YSgnY29sbGFwc2UnLCBudWxsKVxuLy8gICAgIH1cbi8vIH0pO1xuXG4vLyAoIGZ1bmN0aW9uKCkge1xuLy8gXHRjb25zdCBzaXRlTmF2aWdhdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnc2l0ZS1uYXZpZ2F0aW9uJyApO1xuXG4vLyBcdC8vIFJldHVybiBlYXJseSBpZiB0aGUgbmF2aWdhdGlvbiBkb24ndCBleGlzdC5cbi8vIFx0aWYgKCAhIHNpdGVOYXZpZ2F0aW9uICkge1xuLy8gXHRcdHJldHVybjtcbi8vIFx0fVxuXG4vLyBcdGNvbnN0IGJ1dHRvbiA9IHNpdGVOYXZpZ2F0aW9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYnV0dG9uJyApWyAwIF07XG5cbi8vIFx0Ly8gUmV0dXJuIGVhcmx5IGlmIHRoZSBidXR0b24gZG9uJ3QgZXhpc3QuXG4vLyBcdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBidXR0b24gKSB7XG4vLyBcdFx0cmV0dXJuO1xuLy8gXHR9XG5cbi8vIFx0Y29uc3QgbWVudSA9IHNpdGVOYXZpZ2F0aW9uLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAndWwnIClbIDAgXTtcblxuLy8gXHQvLyBIaWRlIG1lbnUgdG9nZ2xlIGJ1dHRvbiBpZiBtZW51IGlzIGVtcHR5IGFuZCByZXR1cm4gZWFybHkuXG4vLyBcdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBtZW51ICkge1xuLy8gXHRcdGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuLy8gXHRcdHJldHVybjtcbi8vIFx0fVxuXG4vLyBcdGlmICggISBtZW51LmNsYXNzTGlzdC5jb250YWlucyggJ25hdi1tZW51JyApICkge1xuLy8gXHRcdG1lbnUuY2xhc3NMaXN0LmFkZCggJ25hdi1tZW51JyApO1xuLy8gXHR9XG5cbi8vIFx0Ly8gVG9nZ2xlIHRoZSAudG9nZ2xlZCBjbGFzcyBhbmQgdGhlIGFyaWEtZXhwYW5kZWQgdmFsdWUgZWFjaCB0aW1lIHRoZSBidXR0b24gaXMgY2xpY2tlZC5cbi8vIFx0YnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoICdjbGljaycsIGZ1bmN0aW9uKCkge1xuLy8gXHRcdHNpdGVOYXZpZ2F0aW9uLmNsYXNzTGlzdC50b2dnbGUoICd0b2dnbGVkJyApO1xuXG4vLyBcdFx0aWYgKCBidXR0b24uZ2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcgKSA9PT0gJ3RydWUnICkge1xuLy8gXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XG4vLyBcdFx0fSBlbHNlIHtcbi8vIFx0XHRcdGJ1dHRvbi5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnICk7XG4vLyBcdFx0fVxuLy8gXHR9ICk7XG5cbi8vIFx0Ly8gUmVtb3ZlIHRoZSAudG9nZ2xlZCBjbGFzcyBhbmQgc2V0IGFyaWEtZXhwYW5kZWQgdG8gZmFsc2Ugd2hlbiB0aGUgdXNlciBjbGlja3Mgb3V0c2lkZSB0aGUgbmF2aWdhdGlvbi5cbi8vIFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oIGV2ZW50ICkge1xuLy8gXHRcdGNvbnN0IGlzQ2xpY2tJbnNpZGUgPSBzaXRlTmF2aWdhdGlvbi5jb250YWlucyggZXZlbnQudGFyZ2V0ICk7XG5cbi8vIFx0XHRpZiAoICEgaXNDbGlja0luc2lkZSApIHtcbi8vIFx0XHRcdHNpdGVOYXZpZ2F0aW9uLmNsYXNzTGlzdC5yZW1vdmUoICd0b2dnbGVkJyApO1xuLy8gXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XG4vLyBcdFx0fVxuLy8gXHR9ICk7XG5cbi8vIFx0Ly8gR2V0IGFsbCB0aGUgbGluayBlbGVtZW50cyB3aXRoaW4gdGhlIG1lbnUuXG4vLyBcdGNvbnN0IGxpbmtzID0gbWVudS5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ2EnICk7XG5cbi8vIFx0Ly8gR2V0IGFsbCB0aGUgbGluayBlbGVtZW50cyB3aXRoIGNoaWxkcmVuIHdpdGhpbiB0aGUgbWVudS5cbi8vIFx0Y29uc3QgbGlua3NXaXRoQ2hpbGRyZW4gPSBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoICcubWVudS1pdGVtLWhhcy1jaGlsZHJlbiA+IGEsIC5wYWdlX2l0ZW1faGFzX2NoaWxkcmVuID4gYScgKTtcblxuLy8gXHQvLyBUb2dnbGUgZm9jdXMgZWFjaCB0aW1lIGEgbWVudSBsaW5rIGlzIGZvY3VzZWQgb3IgYmx1cnJlZC5cbi8vIFx0Zm9yICggY29uc3QgbGluayBvZiBsaW5rcyApIHtcbi8vIFx0XHRsaW5rLmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1cycsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XG4vLyBcdFx0bGluay5hZGRFdmVudExpc3RlbmVyKCAnYmx1cicsIHRvZ2dsZUZvY3VzLCB0cnVlICk7XG4vLyBcdH1cblxuLy8gXHQvLyBUb2dnbGUgZm9jdXMgZWFjaCB0aW1lIGEgbWVudSBsaW5rIHdpdGggY2hpbGRyZW4gcmVjZWl2ZSBhIHRvdWNoIGV2ZW50LlxuLy8gXHRmb3IgKCBjb25zdCBsaW5rIG9mIGxpbmtzV2l0aENoaWxkcmVuICkge1xuLy8gXHRcdGxpbmsuYWRkRXZlbnRMaXN0ZW5lciggJ3RvdWNoc3RhcnQnLCB0b2dnbGVGb2N1cywgZmFsc2UgKTtcbi8vIFx0fVxuXG4vLyBcdC8qKlxuLy8gXHQgKiBTZXRzIG9yIHJlbW92ZXMgLmZvY3VzIGNsYXNzIG9uIGFuIGVsZW1lbnQuXG4vLyBcdCAqL1xuLy8gXHRmdW5jdGlvbiB0b2dnbGVGb2N1cygpIHtcbi8vIFx0XHRpZiAoIGV2ZW50LnR5cGUgPT09ICdmb2N1cycgfHwgZXZlbnQudHlwZSA9PT0gJ2JsdXInICkge1xuLy8gXHRcdFx0bGV0IHNlbGYgPSB0aGlzO1xuLy8gXHRcdFx0Ly8gTW92ZSB1cCB0aHJvdWdoIHRoZSBhbmNlc3RvcnMgb2YgdGhlIGN1cnJlbnQgbGluayB1bnRpbCB3ZSBoaXQgLm5hdi1tZW51LlxuLy8gXHRcdFx0d2hpbGUgKCAhIHNlbGYuY2xhc3NMaXN0LmNvbnRhaW5zKCAnbmF2LW1lbnUnICkgKSB7XG4vLyBcdFx0XHRcdC8vIE9uIGxpIGVsZW1lbnRzIHRvZ2dsZSB0aGUgY2xhc3MgLmZvY3VzLlxuLy8gXHRcdFx0XHRpZiAoICdsaScgPT09IHNlbGYudGFnTmFtZS50b0xvd2VyQ2FzZSgpICkge1xuLy8gXHRcdFx0XHRcdHNlbGYuY2xhc3NMaXN0LnRvZ2dsZSggJ2ZvY3VzJyApO1xuLy8gXHRcdFx0XHR9XG4vLyBcdFx0XHRcdHNlbGYgPSBzZWxmLnBhcmVudE5vZGU7XG4vLyBcdFx0XHR9XG4vLyBcdFx0fVxuXG4vLyBcdFx0aWYgKCBldmVudC50eXBlID09PSAndG91Y2hzdGFydCcgKSB7XG4vLyBcdFx0XHRjb25zdCBtZW51SXRlbSA9IHRoaXMucGFyZW50Tm9kZTtcbi8vIFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4vLyBcdFx0XHRmb3IgKCBjb25zdCBsaW5rIG9mIG1lbnVJdGVtLnBhcmVudE5vZGUuY2hpbGRyZW4gKSB7XG4vLyBcdFx0XHRcdGlmICggbWVudUl0ZW0gIT09IGxpbmsgKSB7XG4vLyBcdFx0XHRcdFx0bGluay5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XG4vLyBcdFx0XHRcdH1cbi8vIFx0XHRcdH1cbi8vIFx0XHRcdG1lbnVJdGVtLmNsYXNzTGlzdC50b2dnbGUoICdmb2N1cycgKTtcbi8vIFx0XHR9XG4vLyBcdH1cbi8vIH0oKSApO1xuIiwiLy8gbWFpbi5qc1xuXG5cblxuXG5cblxuXG4vLyBKUVVFUlkgVVNFIFNUUklDVCBTQ1JJUFQgV1JBUFBFUlxuLy8gc2Nyb2xsIGVhc2luZywgc2Nyb2xsc3B5LCBmYW5jeWJveCwgYW5kIGlzb3RvcGUgLSBjb21tZW50IHdoYXQgaXNuJ3QgbmVlZGVkLCBvciBhZGQgbW9yZVxuKGZ1bmN0aW9uKCQpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7IC8vIFN0YXJ0IG9mIHVzZSBzdHJpY3RcblxuICAvLyBNT0JJTEUgTUVOVSBUT0dHTEVcbiAgLy8gdG9nZ2xlIHRoZSBtb2JpbGUgbWVudSBidXR0b24gb3BlbiBhbmQgY2xvc2VkIHN0YXRlc1xuICB2YXIgcmVtb3ZlQ2xhc3MgPSB0cnVlO1xuICAkKFwiLm5hdmJhci10b2dnbGVyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiLm5hdmJhci10b2dnbGVyXCIpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAkKFwiI25hdmJhclNlYXJjaFwiKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgcmVtb3ZlQ2xhc3MgPSBmYWxzZTtcbiAgfSk7XG5cbiAgLy8gaWdub3JlIGNsaWNraW5nIHRoZSBuYXZiYXIgc2VhcmNoXG4gICQoXCIubmF2LXNlYXJjaFwiKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICByZW1vdmVDbGFzcyA9IGZhbHNlO1xuICB9KTtcblxuICAvLyBjbG9zZSBuYXYgaWYgcGFnZSBpcyBjbGlja2VkXG4gICQoXCJodG1sXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocmVtb3ZlQ2xhc3MpIHtcbiAgICAgICQoXCIubmF2YmFyLXRvZ2dsZXJcIikucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICAgJCgnLm5hdmJhci1jb2xsYXBzZScpLmNvbGxhcHNlKCdoaWRlJyk7XG4gICAgfVxuICAgIHJlbW92ZUNsYXNzID0gdHJ1ZTtcbiAgfSk7XG5cbiAgLy8gY2xvc2VzIHJlc3BvbnNpdmUgbWVudSB3aGVuIGEgc2Nyb2xsIHRyaWdnZXIgbGluayBpcyBjbGlja2VkXG4gICQoJy5qcy1zY3JvbGwtdHJpZ2dlcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQoXCIubmF2YmFyLXRvZ2dsZXJcIikucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgICQoJy5uYXZiYXItY29sbGFwc2UnKS5jb2xsYXBzZSgnaGlkZScpO1xuICB9KTtcblxuICAvLyAvLyBjbG9zZXMgcmVzcG9uc2l2ZSBtZW51IHdoZW4gYSBuYXZiYXIgbGluayBpcyBjbGlja2VkXG4gIC8vICQoJy5qcy1zY3JvbGwtdHJpZ2dlciA+IGEnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgLy8gICAkKFwiLm5hdmJhci10b2dnbGVyXCIpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgLy8gICAkKCcubmF2YmFyLWNvbGxhcHNlJykuY29sbGFwc2UoJ2hpZGUnKTtcbiAgLy8gfSk7XG5cbiAgLy8gZGlzYWJsZSBtb2JpbGUgbmF2IGZvciBsYXB0b3AgYW5kIGRlc2t0b3BcbiAgJCh3aW5kb3cpLnJlc2l6ZShmdW5jdGlvbigpIHtcbiAgICBpZiggJCh0aGlzKS53aWR0aCgpID4gOTkxICkge1xuICAgICAgJChcIi5uYXZiYXItdG9nZ2xlclwiKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAkKCcubmF2YmFyLWNvbGxhcHNlJykuY29sbGFwc2UoJ2hpZGUnKTsgIFxuICAgIH1cbiAgfSk7XG5cblxuXG5cbiAgLy8gU2VhcmNoIG1lbnUgdG9nZ2xlc1xuICAkKCcjbmF2YmFyU2VhcmNoVG9nZ2xlcicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICQoXCIjbmF2YmFyU2VhcmNoXCIpLnRvZ2dsZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAkKFwiLm5hdmJhci10b2dnbGVyXCIpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAkKCcubmF2YmFyLWNvbGxhcHNlJykuY29sbGFwc2UoJ2hpZGUnKTsgIFxuICB9KTtcblxuICAkKCcjbmF2YmFyU2VhcmNoQ2xvc2UnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAkKFwiI25hdmJhclNlYXJjaFwiKS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XG4gIH0pO1xuXG5cblxuICAvLyAvLyBTQ1JPTExVUCBCVVRUT05cbiAgLy8gLy8gc2hvdyBzY3JvbGx1cCBidXR0b24gYWZ0ZXIgc2Nyb2xsaW5nIDMwMHB4XG4gIC8vIHNjcm9sbFRvVG9wQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY3JvbGxVcEJ1dHRvblwiKTtcbiAgLy8gdmFyIHNob3dTY3JvbGxUb1RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gICB2YXIgeSA9IHdpbmRvdy5zY3JvbGxZO1xuICAvLyAgIGlmICh5ID49IDMwMCkge1xuICAvLyAgICAgc2Nyb2xsVG9Ub3BCdXR0b24uY2xhc3NOYW1lID0gXCJzY3JvbGx1cCBzaG93XCJcbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgc2Nyb2xsVG9Ub3BCdXR0b24uY2xhc3NOYW1lID0gXCJzY3JvbGx1cFwiXG4gIC8vICAgfVxuICAvLyB9O1xuICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCBzaG93U2Nyb2xsVG9Ub3ApO1xuXG4gICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7ICAgIFxuICAgIHZhciBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cbiAgICBpZiAoc2Nyb2xsID49IDMwMCkge1xuICAgICAgJChcIiNzY3JvbGxVcEJ1dHRvblwiKS5hZGRDbGFzcyhcInNob3dcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoXCIjc2Nyb2xsVXBCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJzaG93XCIpO1xuICAgIH1cbiAgfSk7XG5cblxuLy8gU21vb3RoIHNjcm9sbGluZyB1c2luZyBqUXVlcnkgZWFzaW5nXG4kKCdhLmpzLXNjcm9sbC10cmlnZ2VyW2hyZWYqPVwiI1wiXTpub3QoW2hyZWY9XCIjXCJdKScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICBpZiAobG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCAnJykgJiYgbG9jYXRpb24uaG9zdG5hbWUgPT0gdGhpcy5ob3N0bmFtZSkge1xuICAgIHZhciB0YXJnZXQgPSAkKHRoaXMuaGFzaCk7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyAnXScpO1xuICAgIGlmICh0YXJnZXQubGVuZ3RoKSB7XG4gICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgIHNjcm9sbFRvcDogKHRhcmdldC5vZmZzZXQoKS50b3AgLSA1NikgLy8gbWF0Y2ggcHggdG8gcGFkZGluZy10b3Agb2YgYm9keSB0YWdcbiAgICAgIH0sIDEwMDAsIFwiZWFzZUluT3V0RXhwb1wiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbn0pO1xuXG5cbi8vIFNtb290aCBzY3JvbGxpbmcgdXNpbmcgalF1ZXJ5IGVhc2luZ1xuJCgnLmpzLXNjcm9sbC10cmlnZ2VyPmFbaHJlZio9XCIjXCJdOm5vdChbaHJlZj1cIiNcIl0pJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gIGlmIChsb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9eXFwvLywgJycpID09IHRoaXMucGF0aG5hbWUucmVwbGFjZSgvXlxcLy8sICcnKSAmJiBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lKSB7XG4gICAgdmFyIHRhcmdldCA9ICQodGhpcy5oYXNoKTtcbiAgICB0YXJnZXQgPSB0YXJnZXQubGVuZ3RoID8gdGFyZ2V0IDogJCgnW25hbWU9JyArIHRoaXMuaGFzaC5zbGljZSgxKSArICddJyk7XG4gICAgaWYgKHRhcmdldC5sZW5ndGgpIHtcbiAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgc2Nyb2xsVG9wOiAodGFyZ2V0Lm9mZnNldCgpLnRvcCAtIDU2KSAvLyBtYXRjaCBweCB0byBwYWRkaW5nLXRvcCBvZiBib2R5IHRhZ1xuICAgICAgfSwgMTAwMCwgXCJlYXNlSW5PdXRFeHBvXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxufSk7XG5cblxuXG4vLyBNYWtlIHN1cmUgc2NyaXB0cyByZW5kZXJlZFxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCl7XG4gIGNvbnNvbGUubG9nKCdkb2N1bWVudCBpcyByZWFkeSwgYXd3IHllYWgnKTtcbn0pO1xuXG5cblxufSkoalF1ZXJ5KTsgLy8gRW5kIG9mIHVzZSBzdHJpY3RcblxuIl19